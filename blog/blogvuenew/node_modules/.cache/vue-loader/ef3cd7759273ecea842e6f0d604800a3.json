{"remainingRequest":"D:\\mycode\\blogvuenew\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mycode\\blogvuenew\\src\\views\\Page.vue?vue&type=style&index=0&id=41a670bb&scoped=true&lang=scss&","dependencies":[{"path":"D:\\mycode\\blogvuenew\\src\\views\\Page.vue","mtime":1612804370964},{"path":"D:\\mycode\\blogvuenew\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCiNwYWdlIHsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICAuZW50ZXIgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMzBweDsNCiAgICBwYWRkaW5nOiAwIDIwcHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvdHRvbTogMzAlOw0KICAgIGxlZnQ6IDUwJTsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7DQogICAgaDIgew0KICAgICAgZm9udC1zaXplOiAyMHB4Ow0KICAgICAgY29sb3I6IHJnYigyNTAsIDI0NSwgMjQ1KTsNCiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCiAgICB9DQogICAgcHsNCiAgICAgIGNvbG9yOiByZ2IoMjUwLCAyNDUsIDI0NSk7DQogICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICBib3JkZXI6IDJweCBzb2xpZCByZ2IoMjUzLCAyNTIsIDI1Mik7DQogICAgICBwYWRkaW5nOiA1cHg7DQogICAgfQ0KICAgIHA6aG92ZXJ7DQogICAgICBjb2xvcjogcmdiKDE2LCAyMzgsIDE2KTsNCiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYigxNiwgMjM4LCAxNik7DQogICAgfQ0KICB9DQogIGJ1dHRvbnsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm90dG9tOiAwOw0KICAgIHJpZ2h0OiAwOw0KICB9DQogIC50b3B7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMTBweDsNCiAgICByaWdodDogNTAlOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCg1MCUpOw0KICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgfQ0KfQ0K"},{"version":3,"sources":["Page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Page.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"page\" v-loading.fullscreen.lock=\"fullscreenLoading\">\r\n    <p class=\"top animate__animated animate__zoomInDown\">鼠标可以拉拽，旋转场景</p>\r\n    <div class=\"enter animate__animated animate__zoomInDown\">\r\n      <h2>Welcome to my town</h2>\r\n      <p @click=\"welcome\">Enter to Blog</p>\r\n    </div>\r\n    <button @click=\"manage\">Admin Login</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\n// import * as dat from \"dat.gui\";\r\n// import * as Stats from \"stats.js\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\n\r\nexport default {\r\n  name: \"Page\",\r\n  data() {\r\n    return {\r\n      camera: null,\r\n      scene: null,\r\n      renderer: null,\r\n      light: null,\r\n      clock: null,\r\n      model: null,\r\n      width: null,\r\n      height: null,\r\n      param: null,\r\n      objUrl: null,\r\n      mtlUrl: null,\r\n      controls: null,\r\n      api: { state: \"Idle\" },\r\n      activeAction: \"\",\r\n      mixer: \"\",\r\n      fullscreenLoading: true\r\n    };\r\n  },\r\n  methods: {\r\n    welcome() {\r\n      this.$router.push({ path: \"/blog\" });\r\n    },\r\n    manage() {\r\n      this.$router.push({ path: \"/edit\" });\r\n    },\r\n    init() {\r\n      //相机\r\n      this.camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        window.innerWidth / window.innerHeight,\r\n        0.25,\r\n        100\r\n      );\r\n      this.camera.position.set(-5, 3, 10);\r\n      this.camera.lookAt(new THREE.Vector3(0, 2, 0));\r\n      //场景\r\n      this.scene = new THREE.Scene();\r\n      this.scene.background = new THREE.Color(0x87ceeb);\r\n      this.scene.fog = new THREE.Fog(0x87ceeb, 20, 100);\r\n\r\n      this.clock = new THREE.Clock();\r\n\r\n      // 灯光\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\r\n      hemiLight.position.set(0, 20, 0);\r\n      this.scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0xffffff);\r\n      dirLight.position.set(0, 20, 10);\r\n      this.scene.add(dirLight);\r\n\r\n      // 地面\r\n      const loader = new THREE.TextureLoader();\r\n      const groundTexture = loader.load(\"../../grass.jpg\");\r\n      groundTexture.wrapS = groundTexture.wrapT = THREE.RepeatWrapping;\r\n      groundTexture.repeat.set(25, 25);\r\n      groundTexture.anisotropy = 16;\r\n      groundTexture.encoding = THREE.sRGBEncoding;\r\n\r\n      const groundMaterial = new THREE.MeshLambertMaterial({\r\n        map: groundTexture,\r\n      });\r\n\r\n      let mesh = new THREE.Mesh(\r\n        new THREE.PlaneGeometry(200, 200),\r\n        groundMaterial\r\n      );\r\n      mesh.position.y = -0.2;\r\n      mesh.rotation.x = -Math.PI / 2;\r\n      mesh.receiveShadow = true;\r\n\r\n      this.scene.add(mesh);\r\n\r\n      // const grid = new THREE.GridHelper(100, 60, 0x000000, 0x000000);\r\n      // grid.material.opacity = 0.2;\r\n      // grid.material.transparent = true;\r\n      // this.scene.add(grid);\r\n\r\n      // 模型\r\n      this.gltfLoader = new GLTFLoader();\r\n      this.gltfLoader.load(\r\n        //public省略\r\n        \"../../Zero.glb\",\r\n        (gltf) => {\r\n          console.log(gltf, \"gltf\");\r\n          gltf.scene.scale.set(0.4, 0.4, 0.4);\r\n          gltf.scene.position.set(0, 0, 0); //定位\r\n          gltf.scene.rotation.y = -0.5;\r\n          // 模型是否否需要阴影\r\n          gltf.scene.traverse((obj) => {\r\n            obj.castShadow = true;\r\n            obj.receiveShadow = true;\r\n          });\r\n          this.fullscreenLoading = false;\r\n          this.scene.add(gltf.scene);\r\n          const animations = gltf.animations;\r\n          this.mixer = new THREE.AnimationMixer(gltf.scene);\r\n          this.mixer.clipAction(animations[1]).play();\r\n\r\n          this.animate();\r\n        }\r\n      );\r\n      this.gltfLoader.load(\r\n        //public省略\r\n        \"../../Bell_Tower.glb\",\r\n        (gltf) => {\r\n          gltf.scene.position.set(8, 0, -5); //定位\r\n          gltf.scene.rotation.y = -0.5;\r\n          // 模型是否否需要阴影\r\n          gltf.scene.traverse((obj) => {\r\n            obj.castShadow = true;\r\n            obj.receiveShadow = true;\r\n          });\r\n          this.scene.add(gltf.scene);\r\n        }\r\n      );\r\n      this.gltfLoader.load(\r\n        //public省略\r\n        \"../../Blacksmith.glb\",\r\n        (gltf) => {\r\n          gltf.scene.position.set(5, 0, -5); //定位\r\n          gltf.scene.rotation.y = -0.5;\r\n          // 模型是否否需要阴影\r\n          gltf.scene.traverse((obj) => {\r\n            obj.castShadow = true;\r\n            obj.receiveShadow = true;\r\n          });\r\n          this.scene.add(gltf.scene);\r\n        }\r\n      );\r\n      this.gltfLoader.load(\r\n        //public省略\r\n        \"../../Inn.glb\",\r\n        (gltf) => {\r\n          gltf.scene.position.set(-4, 0, -1); //定位\r\n          gltf.scene.rotation.y = 1.2;\r\n          // 模型是否否需要阴影\r\n          gltf.scene.traverse((obj) => {\r\n            obj.castShadow = true;\r\n            obj.receiveShadow = true;\r\n          });\r\n          this.scene.add(gltf.scene);\r\n        }\r\n      );\r\n      this.gltfLoader.load(\r\n        //public省略\r\n        \"../../Stable.glb\",\r\n        (gltf) => {\r\n          \r\n          gltf.scene.position.set(3, 0, -8); //定位\r\n          gltf.scene.rotation.y = -0.5;\r\n          // 模型是否否需要阴影\r\n          gltf.scene.traverse((obj) => {\r\n            obj.castShadow = true;\r\n            obj.receiveShadow = true;\r\n          });\r\n          this.scene.add(gltf.scene);\r\n        }\r\n      );\r\n      this.renderer = new THREE.WebGLRenderer({ antialias: true });\r\n      this.renderer.setPixelRatio(window.devicePixelRatio);\r\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n      this.renderer.outputEncoding = THREE.sRGBEncoding;\r\n      page.appendChild(this.renderer.domElement);\r\n      this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n      window.addEventListener(\"resize\", this.onWindowResize);\r\n\r\n    },\r\n    onWindowResize() {\r\n      this.camera.aspect = window.innerWidth / window.innerHeight;\r\n      this.camera.updateProjectionMatrix();\r\n\r\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n    },\r\n    animate() {\r\n      const dt = this.clock.getDelta();\r\n      if (this.mixer) this.mixer.update(dt);\r\n\r\n      requestAnimationFrame(this.animate);\r\n      this.renderer.render(this.scene, this.camera);\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.init();\r\n    this.animate();\r\n    \r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n#page {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n  .enter {\r\n    width: 100%;\r\n    height: 30px;\r\n    padding: 0 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    position: absolute;\r\n    bottom: 30%;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    h2 {\r\n      font-size: 20px;\r\n      color: rgb(250, 245, 245);\r\n      font-weight: bold;\r\n      margin-bottom: 30px;\r\n    }\r\n    p{\r\n      color: rgb(250, 245, 245);\r\n      cursor: pointer;\r\n      border-radius: 8px;\r\n      border: 2px solid rgb(253, 252, 252);\r\n      padding: 5px;\r\n    }\r\n    p:hover{\r\n      color: rgb(16, 238, 16);\r\n      border: 2px solid rgb(16, 238, 16);\r\n    }\r\n  }\r\n  button{\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 0;\r\n  }\r\n  .top{\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 50%;\r\n    transform: translateX(50%);\r\n    font-size: 10px;\r\n  }\r\n}\r\n</style>"]}]}