{"remainingRequest":"D:\\mycode\\blogvuenew\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mycode\\blogvuenew\\src\\views\\Page.vue?vue&type=style&index=0&id=5a7b936e&scoped=true&lang=scss&","dependencies":[{"path":"D:\\mycode\\blogvuenew\\src\\views\\Page.vue","mtime":1612776844652},{"path":"D:\\mycode\\blogvuenew\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mycode\\blogvuenew\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCiNwYWdlIHsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICAuZW50ZXIgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHBhZGRpbmc6IDAgMjBweDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm90dG9tOiA1MCU7DQogIH0NCn0NCg=="},{"version":3,"sources":["Page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Page.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"page\">\r\n    <div class=\"enter\">\r\n      <button type=\"success\" @click=\"manage\">Login</button>\r\n      <button type=\"success\" @click=\"welcome\">Enter to Blog</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\nimport * as dat from \"dat.gui\";\r\nimport * as Stats from \"stats.js\";\r\n// import Url from \"../../public\";\r\nexport default {\r\n  name: \"Page\",\r\n  data() {\r\n    return {\r\n      camera: null,\r\n      scene: null,\r\n      renderer: null,\r\n      light: null,\r\n      clock: null,\r\n      model: null,\r\n      stats: null,\r\n      width: null,\r\n      height: null,\r\n      param: null,\r\n    };\r\n  },\r\n  methods: {\r\n    welcome() {\r\n      this.$router.push({ path: \"/blog\" });\r\n    },\r\n    manage() {\r\n      this.$router.push({ path: \"/edit\" });\r\n    },\r\n    init() {\r\n      //相机\r\n      this.camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        window.innerWidth / window.innerHeight,\r\n        0.25,\r\n        100\r\n      );\r\n      this.camera.position.set(-5, 3, 10);\r\n      this.camera.lookAt(new THREE.Vector3(0, 2, 0));\r\n      //场景\r\n      this.scene = new THREE.Scene();\r\n      this.scene.background = new THREE.Color(0xe0e0e0);\r\n      this.scene.fog = new THREE.Fog(0xe0e0e0, 20, 100);\r\n\r\n      this.clock = new THREE.Clock();\r\n\r\n      // 灯光\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\r\n      hemiLight.position.set(0, 20, 0);\r\n      this.scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0xffffff);\r\n      dirLight.position.set(0, 20, 10);\r\n      this.scene.add(dirLight);\r\n\r\n      // 地面\r\n      const mesh = new THREE.Mesh(\r\n        new THREE.PlaneGeometry(2000, 2000),\r\n        new THREE.MeshPhongMaterial({ color: 0x999999, depthWrite: false })\r\n      );\r\n      mesh.rotation.x = -Math.PI / 2;\r\n      this.scene.add(mesh);\r\n\r\n      const grid = new THREE.GridHelper(100, 60, 0x000000, 0x000000);\r\n      grid.material.opacity = 0.9;\r\n      grid.material.transparent = true;\r\n      this.scene.add(grid);\r\n\r\n      // model\r\n      var MTLLoader = require('three-mtl-loader');\r\n      var mtlLoader = new MTLLoader();\r\n      //设置文件路径\r\n      mtlLoader.setPath(\"../../public/\");\r\n      mtlLoader.load(\r\n        \"Cleric.mtl\",\r\n        function (material) {\r\n          this.model = gltf.scene;\r\n          this.scene.add(model);\r\n          //创建OBJ加载器\r\n          var OBJLoader = require('three-obj-loader');\r\n          var objLoader = new OBJLoader();\r\n          //设置当前加载的纹理\r\n          objLoader.setMaterials(material);\r\n          objLoader.setPath(\"../../public/\");\r\n          objLoader.load(\"Cleric.obj\", function (object) {\r\n            //添加阴影\r\n            object.traverse(function (item) {\r\n              if (item instanceof THREE.Mesh) {\r\n                item.castShadow = true;\r\n                item.receiveShadow = true;\r\n              }\r\n            });\r\n            //缩放\r\n            object.scale.set(0.3, 0.3, 0.3);\r\n            this.scene.add(object);\r\n          });\r\n          // \tcreateGUI( model, gltf.animations );\r\n        },\r\n        undefined,\r\n        function (e) {\r\n          console.error(e);\r\n        }\r\n      );\r\n\r\n      this.renderer = new THREE.WebGLRenderer({ antialias: true });\r\n      this.renderer.setPixelRatio(window.devicePixelRatio);\r\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n      this.renderer.outputEncoding = THREE.sRGBEncoding;\r\n      page.appendChild(this.renderer.domElement);\r\n\r\n      window.addEventListener(\"resize\", this.onWindowResize);\r\n\r\n      // stats\r\n      this.stats = new Stats();\r\n      page.appendChild(this.stats.dom);\r\n    },\r\n    createGUI(model, animations) {\r\n      const states = [\r\n        \"Idle\",\r\n        \"Walking\",\r\n        \"Running\",\r\n        \"Dance\",\r\n        \"Death\",\r\n        \"Sitting\",\r\n        \"Standing\",\r\n      ];\r\n      const emotes = [\"Jump\", \"Yes\", \"No\", \"Wave\", \"Punch\", \"ThumbsUp\"];\r\n\r\n      gui = new dat.GUI();\r\n\r\n      mixer = new THREE.AnimationMixer(model);\r\n\r\n      actions = {};\r\n\r\n      for (let i = 0; i < animations.length; i++) {\r\n        const clip = animations[i];\r\n        const action = mixer.clipAction(clip);\r\n        actions[clip.name] = action;\r\n\r\n        if (emotes.indexOf(clip.name) >= 0 || states.indexOf(clip.name) >= 4) {\r\n          action.clampWhenFinished = true;\r\n          action.loop = THREE.LoopOnce;\r\n        }\r\n      }\r\n\r\n      // states\r\n\r\n      const statesFolder = gui.addFolder(\"States\");\r\n\r\n      const clipCtrl = statesFolder.add(api, \"state\").options(states);\r\n\r\n      clipCtrl.onChange(function () {\r\n        fadeToAction(api.state, 0.5);\r\n      });\r\n\r\n      statesFolder.open();\r\n\r\n      // emotes\r\n\r\n      const emoteFolder = gui.addFolder(\"Emotes\");\r\n\r\n      function createEmoteCallback(name) {\r\n        api[name] = function () {\r\n          fadeToAction(name, 0.2);\r\n\r\n          mixer.addEventListener(\"finished\", restoreState);\r\n        };\r\n\r\n        emoteFolder.add(api, name);\r\n      }\r\n\r\n      function restoreState() {\r\n        mixer.removeEventListener(\"finished\", restoreState);\r\n\r\n        fadeToAction(api.state, 0.2);\r\n      }\r\n\r\n      for (let i = 0; i < emotes.length; i++) {\r\n        createEmoteCallback(emotes[i]);\r\n      }\r\n\r\n      emoteFolder.open();\r\n\r\n      // expressions\r\n\r\n      face = model.getObjectByName(\"Head_4\");\r\n\r\n      const expressions = Object.keys(face.morphTargetDictionary);\r\n      const expressionFolder = gui.addFolder(\"Expressions\");\r\n\r\n      for (let i = 0; i < expressions.length; i++) {\r\n        expressionFolder\r\n          .add(face.morphTargetInfluences, i, 0, 1, 0.01)\r\n          .name(expressions[i]);\r\n      }\r\n\r\n      activeAction = actions[\"Walking\"];\r\n      activeAction.play();\r\n\r\n      expressionFolder.open();\r\n    },\r\n    fadeToAction(name, duration) {\r\n      previousAction = activeAction;\r\n      activeAction = actions[name];\r\n\r\n      if (previousAction !== activeAction) {\r\n        previousAction.fadeOut(duration);\r\n      }\r\n\r\n      activeAction\r\n        .reset()\r\n        .setEffectiveTimeScale(1)\r\n        .setEffectiveWeight(1)\r\n        .fadeIn(duration)\r\n        .play();\r\n    },\r\n    onWindowResize() {\r\n      this.camera.aspect = window.innerWidth / window.innerHeight;\r\n      this.camera.updateProjectionMatrix();\r\n\r\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n    },\r\n    animate() {\r\n      const dt = this.clock.getDelta();\r\n      // if (mixer) mixer.update(dt);\r\n      requestAnimationFrame(this.animate);\r\n      this.renderer.render(this.scene, this.camera);\r\n      this.stats.update();\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.init();\r\n    this.animate();\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n#page {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n  .enter {\r\n    width: 100%;\r\n    padding: 0 20px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    position: absolute;\r\n    bottom: 50%;\r\n  }\r\n}\r\n</style>"]}]}